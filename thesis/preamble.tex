% Preamble - Evan's thesis version

%%% Load packages
\usepackage{hyperref}
\usepackage[obeyFinal,textsize=scriptsize,shadow,loadshadowlibrary]{todonotes}
\usepackage[shortlabels]{enumitem}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{booktabs}
\usepackage[nameinlink]{cleveref}
\usepackage{derivative}
\usepackage{graphicx}
\usepackage{mathdots}
\usepackage{mathrsfs}
\usepackage{mathtools}
\usepackage{microtype}

\usepackage{asymptote}
\usepackage{tikz-cd}
\usetikzlibrary{decorations.pathmorphing}

\allowdisplaybreaks

\usepackage[backend=biber,backref=true,style=alphabetic]{biblatex}

\usepackage{thmtools}
\declaretheorem[name=Theorem,numberwithin=section]{theorem}
\declaretheorem[name=Lemma,sibling=theorem]{lemma}
\declaretheorem[name=Proposition,sibling=theorem]{proposition}
\declaretheorem[name=Corollary,sibling=theorem]{corollary}
\declaretheorem[name=Conjecture,sibling=theorem]{conjecture}
\declaretheorem[name=Hypothesis,sibling=theorem]{hypothesis}
\declaretheorem[name=Assumption,sibling=theorem]{assume}
\declaretheorem[name=Definition,sibling=theorem,style=definition]{definition}
\declaretheorem[name=Example,sibling=theorem,style=definition]{example}
\declaretheorem[name=Remark,sibling=theorem,style=definition]{remark}

%%% Macros
\providecommand{\ol}{\overline}
\providecommand{\ul}{\underline}
\providecommand{\wt}{\widetilde}
\providecommand{\wh}{\widehat}
\providecommand{\eps}{\varepsilon}
\providecommand{\half}{\frac{1}{2}}
\providecommand{\inv}{^{-1}}
\newcommand{\dang}{\measuredangle} %% Directed angle
\providecommand{\CC}{\mathbb C}
\providecommand{\FF}{\mathbb F}
\providecommand{\NN}{\mathbb N}
\providecommand{\QQ}{\mathbb Q}
\providecommand{\RR}{\mathbb R}
\providecommand{\ZZ}{\mathbb Z}
\providecommand{\ts}{\textsuperscript}
\providecommand{\dg}{^\circ}
\providecommand{\ii}{\item}
\newcommand{\surjto}{\twoheadrightarrow}

\DeclareMathOperator*{\Arch}{ARCH}
\DeclareMathOperator{\BC}{BC}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\GK}{GK}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\Mat}{Mat}
\DeclareMathOperator{\Norm}{N}
\DeclareMathOperator{\Nm}{Nm}
\DeclareMathOperator{\Orb}{Orb}
\DeclareMathOperator{\Orth}{O}
\DeclareMathOperator{\PU}{PU}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\Sat}{Sat}
\DeclareMathOperator{\Serre}{ST}
\DeclareMathOperator{\Spec}{Spec}
\DeclareMathOperator{\Spf}{Spf}
\DeclareMathOperator{\SU}{SU}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Tr}{Tr}
\DeclareMathOperator{\U}{U}
\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\antidiag}{antidiag}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\rproj}{proj}
\DeclareMathOperator{\tr}{tr}

\newcommand{\cc}{\mathbf c}
\newcommand{\nn}{\mathbf n}
\newcommand{\uu}{\mathbf u}
\newcommand{\vv}{\mathbf v}
\newcommand{\DD}{\mathcal D}
\newcommand{\HH}{\mathcal H}
\newcommand{\MM}{\mathcal M}
\newcommand{\EE}{\mathbb E}
\newcommand{\TT}{\mathbb T}
\newcommand{\VV}{\mathbb V}
\newcommand{\XX}{\mathbb X}

\newcommand{\RZ}{\mathcal N} % for RZ space
\newcommand{\ZD}{\mathcal Z} % Cartier divisor
\newcommand{\ZO}[1]{\mathcal Z^{\dagger}_{\SO(#1)}}
\newcommand{\DT}{\mathcal D^{\tr = 0}}
\newcommand{\ODT}{\OO_\DD^{\tr = 0}}

\newcommand{\BG}{\mathbf{G}}
\newcommand{\BK}{\mathbf{K}}
\newcommand{\BM}{\mathbf{M}}
\newcommand{\BN}{\mathbf{N}}
\newcommand{\BP}{\mathbf{P}}
\newcommand{\BS}{\mathbf{S}}

\newcommand{\guv}{{(\gamma, \uu, \vv^\top)}}
\newcommand{\oneV}{\mathbf{1}_{\OO_F^n \times (\OO_F^n)^\vee}}
\newcommand{\rs}{_{\mathrm{rs}}}
\newcommand{\TTr}{\mathcal{T}_{\mathbf{1}_{K, \le r}}}
\newcommand{\fr}{\mathbf{1}_{K, \le r}}

\newcommand{\OO}{O} % to avoid confusion with structure sheaf I guess
\newcommand{\Sheaf}{\mathcal{O}} % sheaf O

\newcommand{\jiao}{\mathop{\otimes}^{\mathbf{L}}} % äº¤, adopted from arXiv:2402.1767v1

\usepackage{listings}
\lstset{basicstyle=\ttfamily,
  backgroundcolor=\color{yellow!3!white},
  breakatwhitespace=true,
  breaklines=true,
  columns=fullflexible,
  commentstyle=\color{red!70!black},
  frame=shadowbox,
  frame=single,
  framerule=1pt,
  identifierstyle=\color{green!40!black},
  keywordstyle=\bfseries,
  keywordstyle=\bfseries\color{blue!80!black},
  numbers=left,
  numbersep=8pt,
  numberstyle=\scriptsize\sffamily\itshape\color{black!80},
  rulecolor=\color{blue!70!black},
  rulesepcolor=\color{blue!30!black},
  showstringspaces=false,
  stringstyle=\color{orange},
  tabsize=4,
  xleftmargin=15pt,
  xrightmargin=15pt,
  resetmargins=true,
}
